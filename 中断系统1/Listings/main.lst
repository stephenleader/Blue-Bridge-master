C51 COMPILER V9.54   MAIN                                                                  02/25/2022 11:30:39 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\#大一\单片机（大一寒假）\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRIN
                    -T(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "reg52.h"
   2          typedef unsigned int u16;
   3          u16 count;
   4          //也可以写成unsigned int count;
   5          
   6          sbit led = P1^0;
   7           void InitTimer0(void)
   8           {
   9   1          TMOD = 0x01;//设置工作模式
  10   1          //相当于方式1
  11   1          TH0 = 0x0FF;
  12   1          TL0 = 0x9c;//对存储器设置初值，
  13   1          //取决于设定计时多少时长
  14   1          EA = 1;//寄存器1，打开总中断
  15   1          ET0 = 1;//寄存器2，
  16   1          PT0 = 1;//寄存器3
  17   1          TR0 = 1;
  18   1       }
  19           
  20           void main(void)
  21           {//主函数里面一定要调用初始化函数
  22   1          InitTimer0();//T0初始化
  23   1          led = 1;
  24   1          count = 0;
  25   1          while(1);//程序堵塞到这里一直循环
  26   1       }
  27           
  28           //每一次溢出都会进入到定时器的中断响应
  29           void Timer0Tnterrupt(void) interrupt 1
  30           {
  31   1          TH0 = 0x0FF;
  32   1          TL0 = 0x9C;
  33   1          //这里要重新赋予一个初值
  34   1          //如果是interrupt2 ，他的初值是可以自动重装的
  35   1          //，不用再写初值
  36   1          count++;
  37   1          if(count == 5000)
  38   1          {
  39   2              count = 0;
  40   2              led = ~led;
  41   2          }
  42   1       }
  43           


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     69    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.

C51 COMPILER V9.54   MAIN                                                                  02/25/2022 11:30:39 PAGE 2   


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
